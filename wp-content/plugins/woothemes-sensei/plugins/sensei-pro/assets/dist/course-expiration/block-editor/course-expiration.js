(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,s=window.wp.plugins,n=window.wp.i18n,a=window.wp.components,r=window.wp.coreData,o=window.moment;var i=e.n(o);const l="expires-after",c="expires-on",p="starts-on",_=(0,n.__)("Set Course Expiration Date","sensei-pro"),u=(0,n.__)("Set Course Start Date","sensei-pro"),m=e=>i()(e).format(i().HTML5_FMT.DATE),d=e=>{const[t,s]=(0,r.useEntityProp)("postType","course","meta");return[t[e],t=>s({[e]:t})]},w=()=>{const[e,s]=d("_course_expiration_type"),[r,o]=d("_course_start_type"),[i,w]=(0,t.useState)(!1),[x,v]=(0,t.useState)(!1),[E,h]=d("_course_expiration_length"),[b,y]=d("_course_expires_on_date"),[g,C]=d("_course_starts_on_date"),[f,S]=d("_course_expiration_period"),D=(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"sensei-wcpc-course-expiration__expires-after"},(0,t.createElement)(a.TextControl,{className:"sensei-wcpc-course-expiration__expiration-length",label:(0,n.__)("Expiration Length","sensei-pro"),hideLabelFromVision:!0,type:"number",step:1,min:1,value:E,onChange:e=>{const t=Math.max(1,parseInt(e.replace(/\D/g,"")||1,10));h(t)},onKeyPress:e=>{/\D/.test(e.key)&&e.preventDefault()}}),(0,t.createElement)(a.SelectControl,{label:(0,n.__)("Expiration Period","sensei-pro"),hideLabelFromVision:!0,value:f,options:[{label:(0,n.__)("Month(s)","sensei-pro"),value:"month"},{label:(0,n.__)("Week(s)","sensei-pro"),value:"week"},{label:(0,n.__)("Day(s)","sensei-pro"),value:"day"}],onChange:S})),"day"===f&&1===E&&(0,t.createElement)("small",{className:"sensei-wcpc-course-expiration__help-text"},(0,n.__)("The learner access will expire at midnight on the day of enrollment.","sensei-pro"))),N=(e,s,n,r,o)=>(0,t.createElement)("div",null,(0,t.createElement)(a.Button,{onClick:()=>{e(!0)},className:"datepicker","data-testid":"start-date-button"},n),r&&(0,t.createElement)(a.DatePicker,{currentDate:s,onChange:o}));return(0,t.createElement)(a.PanelBody,{title:(0,n.__)("Access Period","sensei-pro"),className:"sensei-wcpc-course-expiration"},(0,t.createElement)("p",{className:"sensei-wcpc-course-expiration__intro"},(0,n.__)("Set a timeframe that students will have access to this course.","sensei-pro")),(0,t.createElement)("div",{className:"access-period-starts"},(0,t.createElement)(a.SelectControl,{label:(0,n.__)("Course Access Starts","sensei-pro"),value:r,options:[{label:(0,n.__)("Immediately","sensei-pro"),value:"immediately"},{label:(0,n.__)("On a specific date","sensei-pro"),value:p}],onChange:o}),p===r&&N(v,g,g?(0,n.sprintf)(
/* translators: %s is replaced with start date string in format YYYY-MM-DD */
(0,n.__)("Starts on %s","sensei-pro"),m(g)):u,x,(e=>{C(e),v(!1)}))),(0,t.createElement)("div",{className:"access-period-expires"},(0,t.createElement)(a.SelectControl,{label:(0,n.__)("Course Access Ends","sensei-pro"),value:e,options:[{label:(0,n.__)("Never","sensei-pro"),value:"no-expiration"},{label:(0,n.__)("After a set period","sensei-pro"),value:l},{label:(0,n.__)("On a specific date","sensei-pro"),value:c}],onChange:s}),l===e&&D,c===e&&N(w,b,b?(0,n.sprintf)(
/* translators: %s is replaced with start date string in format YYYY-MM-DD */
(0,n.__)("Expires on %s","sensei-pro"),m(b)):_,i,(e=>{y(e),w(!1)}))))};(0,s.registerPlugin)("sensei-pro-course-expiration-plugin",{render:()=>(0,t.createElement)(a.Fill,{name:"SenseiCourseSidebar"},(0,t.createElement)(w,null)),icon:null})})();