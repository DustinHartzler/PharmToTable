/*! Thrive Architect - 2021-10-21
* http://www.thrivethemes.com/
* Copyright (c) 2021 Thrive Themes */

"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(l){var f,g,s,p,d,n={".js":[],".json":[],".css":[],".html":[]},h="function"==typeof require?require:null;return p=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},d=function(t,e,a){var i,s;if("function"==typeof t[e+a])return e+a;for(i=0;s=n[a][i];++i)if("function"==typeof t[e+s])return e+s;return null},f=function(t,e,a,i,s,n){var o,r,l,h,c,u;for("."!==(o=(a=a.split("/")).pop())&&".."!==o||(a.push(o),o="");null!=(r=a.shift());)if(r&&"."!==r&&(".."===r?(t=e.pop(),n=n.slice(0,n.lastIndexOf("/"))):(e.push(t),t=t[r],n+="/"+r),!t))throw p(i);if(o&&"function"!=typeof t[o]&&((u=(u=(u=(u=d(t,o,".js"))||d(t,o,".json"))||d(t,o,".css"))||d(t,o,".html"))?o=u:2!==s&&"object"===_typeof(t[o])&&(e.push(t),t=t[o],n+="/"+o,o="")),!o)return 1!==s&&t[":mainpath:"]?f(t,e,t[":mainpath:"],i,1,n):f(t,e,"index",i,2,n);if(!(c=t[o]))throw p(i);return c.hasOwnProperty("module")?c.module.exports:(l={},c.module=h={exports:l,id:n+"/"+o},c.call(l,l,h,g(t,e,n)),h.exports)},s=function(t,e,a,i){var s,n=a,o=a.charAt(0),r=0;if("/"===o){if(n=n.slice(1),!(t=l["/"])){if(h)return h(a);throw p(a)}i="/",e=[]}else if("."!==o){if(s=n.split("/",1)[0],!(t=l[s])){if(h)return h(a);throw p(a)}i=s,e=[],(n=n.slice(s.length+1))||(r=(n=t[":mainpath:"])?1:(n="index",2))}return f(t,e,n,a,r,i)},(g=function(e,a,i){return function(t){return s(e,[].concat(a),t,i)}})(l,[],"")}({workspace:{editor:{js:{editor:{src:{"lightspeed-optimize.js":function(t,e,o){!function(t){var e=t(document.body);e.on("update_checkout",function(t){return t.stopImmediatePropagation()});var a=new(o("./lightspeed")(t))(tcb_lightspeed_optimize.post),i=a.getOptimizedCss(tcb_lightspeed_optimize.styles),s=a.getJsModulesToSave(e,tcb_lightspeed_optimize.js_modules);0===i.length&&console.warn("[".concat(tcb_lightspeed_optimize.post.ID,'] "').concat(tcb_lightspeed_optimize.post.post_title,'" has no styles saved!!!')),0===s.length&&console.warn("[".concat(tcb_lightspeed_optimize.post.ID,'] "').concat(tcb_lightspeed_optimize.post.post_title,'" has no js modules saved!!!'));var n={};document.dispatchEvent(new CustomEvent("lightspeed_data.tcb",{detail:n})),setTimeout(function(){t.ajax({xhrFields:{withCredentials:!0},headers:{"X-WP-Nonce":tcb_lightspeed_optimize.nonce},type:"POST",url:tcb_lightspeed_optimize.route,data:{optimized_styles:i,js_modules:s,key:tcb_lightspeed_optimize.key,id:tcb_lightspeed_optimize.post.ID,extra_data:n}}).always(function(t){parent&&"function"==typeof parent.postMessage&&parent.postMessage({from:"lightspeed-optimize",id:parseInt(tcb_lightspeed_optimize.post.ID),result:!!t.success,key:tcb_lightspeed_optimize.key},"*")})},42)}(jQuery)},"lightspeed.js":function(t,e,a){e.exports=function(c){return function(){function h(t){_classCallCheck(this,h),this.post=t,this.flags={}}return _createClass(h,[{key:"resetFlags",value:function(){this.flags={}}},{key:"getOptimizedCss",value:function(t){var i=this,e=0<arguments.length&&void 0!==t?t:[];this.resetFlags();var s=[],n={},o={};for(var a in c(e.map(function(t){return"#".concat(t,"-css")}).join(",")).each(function(t,e){var a=e.sheet;try{a&&a.cssRules&&_toConsumableArray(a.cssRules).forEach(function(t){switch(t.type){case CSSRule.STYLE_RULE:var e=i.isSelectorUsed(t.selectorText);e&&s.push(t.cssText.replace(t.selectorText,e));break;case CSSRule.MEDIA_RULE:var a=h.conditionText(t);a?(void 0===n[a]&&(n[a]=[]),_toConsumableArray(t.cssRules).forEach(function(t){if(t.type===CSSRule.STYLE_RULE){var e=i.isSelectorUsed(t.selectorText);e&&n[a].push(t.cssText.replace(t.selectorText,e))}else console.error(t)})):s.push(t.cssText);break;case CSSRule.KEYFRAMES_RULE:o[t.name]=t.cssText;break;case CSSRule.SUPPORTS_RULE:}})}catch(t){console.warn(t)}}),n)n[a].length&&s.push("".concat(a,"{").concat(n[a].join(""),"}"));var r=s.join("");for(var l in o)r.includes(l)&&s.push(o[l]);return s.join("")}},{key:"isSelectorUsed",value:function(t){var a=this;return t.split(",").filter(function(e){return!e.includes(".tve-state-hover")&&!e.includes("tcb-edit-mode")&&(e=e.replace(".tve_editor_page",".whatever-class-no-one-cares"),e=h.getRealSelector(e),0<c(e).filter(":not(".concat(h.excludedContainers.join(" *,")," *)")).length||a.customSelectorChecks.some(function(t){return"function"==typeof t&&t(e)}))}).map(function(t){return t.trim()}).join(",")}},{key:"hasAnimationsAndActions",value:function(e){var t=!1;return e.includes("tve_anim_start")&&(void 0===this.flags["has-animations-actions-element"]&&(this.flags["has-animations-actions-element"]=_toConsumableArray(new Set(_toConsumableArray(c(".tve_ea_thrive_animation")).map(function(t){return t.className.replace("tve_anim_start","").match(/(tve_anim_\S*)/),RegExp.$1.trim()})))),t=!e.replace("tve_anim_start","").match(/tve_anim_\S*/)||this.flags["has-animations-actions-element"].some(function(t){return e.includes(t)})),t}},{key:"hasFileUpload",value:function(t){return void 0===this.flags["has-file-upload"]&&(this.flags["has-file-upload"]=0<c(".tve_lg_file").length),this.flags["has-file-upload"]&&t.match(/tcb-file-list/)}},{key:"hasLeadGeneration",value:function(t){return void 0===this.flags["has-lead-generation"]&&(this.flags["has-lead-generation"]=0<c(".thrv_lead_generation_container").length),this.flags["has-lead-generation"]&&t.match(/tve-lg-error|thrv-svg-icon svg|tcb-permanently-hidden|tvd-toast|thrv_lead_generation_container|tcb-form-loader-icon/)}},{key:"hasContactForm",value:function(t){return void 0===this.flags["contact-form"]&&(this.flags["contact-form"]=0<c(".thrv-contact-form").length),this.flags["contact-form"]&&t.match(/tcb-cf-error|tar-disabled|thrv-svg-icon svg|tvd-toast/)}},{key:"hasUserProfile",value:function(t){return void 0===this.flags["has-user-profile"]&&(this.flags["has-user-profile"]=0<c(".tve-user-profile").length),this.flags["has-user-profile"]&&t.match(/tve-up-error|tvd-toast|tcb-form-loader-icon/)}},{key:"hasToggles",value:function(t){return void 0===this.flags["has-faq-element"]&&(this.flags["has-faq-element"]=0<c(".tve_faq").length),this.flags["has-faq-element"]&&t.includes("tve_oFaq")}},{key:"hasTooltip",value:function(t){return void 0===this.flags["has-tooltip"]&&(this.flags["has-tooltip"]=0<c(".tve_ea_thrive_tooltip").length),this.flags["has-tooltip"]&&t.includes(".tve_ui_tooltip")}},{key:"hasMenu",value:function(t){return void 0===this.flags["has-menu"]&&(this.flags["has-menu"]=0<c(".thrv_widget_menu").length),this.flags["has-menu"]&&t.includes(".thrv_widget_menu")}},{key:"hasMegaMenu",value:function(t){return void 0===this.flags["has-megamenu"]&&(this.flags["has-megamenu"]=0<c(".thrv_widget_menu.tcb-mega-std").length),this.flags["has-megamenu"]&&t.match(/tcb-mega-|tcb-mm-/)}},{key:"hasTOC",value:function(t){return void 0===this.flags["has-toc"]&&(this.flags["has-toc"]=0<c(".tve-toc").length),this.flags["has-toc"]&&t.includes(".tve-toc")}},{key:"hasNotification",value:function(t){return void 0===this.flags["has-notification"]&&(this.flags["has-notification"]="tve_notifications"===this.post.post_type||0<c(".thrv_lead_generation, .tve-user-profile, .tcb-login-form-wrapper").length),this.flags["has-notification"]&&t.includes(".notifications-content-wrapper")}},{key:"hasWooMiniCart",value:function(t){return void 0===this.flags["has-woo-mini-cart"]&&(this.flags["has-woo-mini-cart"]=0<c(".tcb-woo-mini-cart").length),this.flags["has-woo-mini-cart"]&&t.match(/tcb-woo-mini-cart-content-wrapper|widget_shopping_cart_content|tcb-woo-mini-cart/)}},{key:"hasPostListCover",value:function(t){return void 0===this.flags["has-post-list"]&&(this.flags["has-post-list"]=0<c(".tcb-post-list").length),this.flags["has-post-list"]&&t.match(/-article-cover/)}},{key:"hasParallax",value:function(t){return void 0===this.flags["has-parallax-element"]&&(this.flags["has-parallax-element"]=_toConsumableArray(c('[data-tve-scroll*="parallax"]')).some(function(t){var e;try{var a=JSON.parse(t.dataset.tveScroll);e="parallax"===a.mode&&0<Object.keys(a.parallax).length}catch(t){e=!1}return e})),this.flags["has-parallax-element"]&&t.includes("tve-scroll-parallax")}},{key:"hasImagePopup",value:function(t){return void 0===this.flags["has-image-popup"]&&(this.flags["has-image-popup"]=0<c('[data-tcb-events*="thrive_zoom"]').length),this.flags["has-image-popup"]&&t.match(/tve_zoom_|tve_close_lb|thrv-svg-icon svg/)}},{key:"hasNumericPagination",value:function(t){return void 0===this.flags["has-numeric-pagination"]&&(this.flags["has-numeric-pagination"]=0<c('[data-type="numeric"].tcb-pagination').length),this.flags["has-numeric-pagination"]&&t.match(/tcb-pagination-number/)}},{key:"hasVideoPopup",value:function(t){return void 0===this.flags["has-video-popup"]&&(this.flags["has-video-popup"]=0<c('[data-tcb-events*="thrive_video"]').length),this.flags["has-video-popup"]&&t.match(/tve_responsive_video_container|tcb-video-popup/)}},{key:"hasLightboxAction",value:function(e){return void 0===this.flags["has-lightbox-action"]&&(this.flags["has-lightbox-action"]=_toConsumableArray(c(".tve_evt_manager_listen")).map(function(t){var e="";return t.dataset.tcbEvents&&(t.dataset.tcbEvents.match(/l_anim":"(\w*)"/),e=RegExp.$1.trim()),e}).filter(function(t){return t})),this.flags["has-lightbox-action"].some(function(t){return e.includes("tve_lb_anim_".concat(t))})}},{key:"hasFloatingVideo",value:function(e){return void 0===this.flags["has-floating-video"]&&(this.flags["has-floating-video"]=_toConsumableArray(c(".thrv_responsive_video[data-float-position]")).map(function(t){return t.dataset.floatPosition})),e.includes(".tve_responsive_video_container")&&this.flags["has-floating-video"].some(function(t){return e.includes(t)})}},{key:"hasACFVideo",value:function(t){return void 0===this.flags["has-acf-video"]&&(this.flags["has-acf-video"]=0<c(".thrv_responsive_video.tcb-custom-field-source").length),this.flags["has-acf-video"]&&t.match(/.tve_responsive_video_container/)}},{key:"hasGalleryLightbox",value:function(t){return void 0===this.flags["has-gallery-lightbox"]&&(this.flags["has-gallery-lightbox"]=0<c('[data-click-behavior="fullscreen"].tcb-image-gallery').length),this.flags["has-gallery-lightbox"]&&t.match(/tcb-gallery-overlay/)}},{key:"hasTableSort",value:function(t){return void 0===this.flags["has-table-sort"]&&(this.flags["has-table-sort"]=0<c(".tve_make_sortable").length),this.flags["has-table-sort"]&&t.match(/tcb-sort/)}},{key:"hasNumberCounter",value:function(t){return void 0===this.flags["has-number-counter"]&&(this.flags["has-number-counter"]=0<c(".tve-number-counter").length),this.flags["has-number-counter"]&&t.match(/tcb-digit|tve-number-counter-temporary-clone/)}},{key:"hasImageGallery",value:function(t){return void 0===this.flags["has-image-gallery"]&&(this.flags["has-image-gallery"]=0<c(".tcb-image-gallery").length),this.flags["has-image-gallery"]&&t.match(/tcb-image-gallery/)}},{key:"getJsModulesToSave",value:function(t,e){var a=[];for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];s&&t.find(s).length&&a.push(i)}return a}},{key:"getAssetsToPreload",value:function(t){return TVE.apply_filters("tcb.assets_to_preload",[],t).filter(function(e,t,a){return t===a.findIndex(function(t){return t.url===e.url})})}},{key:"isTCBLightbox",value:function(t){return void 0===this.flags["has-lightbox"]&&(this.flags["has-lightbox"]=0<c(".tve_p_lb_content:visible").length),("tcb_lightbox"===this.post.post_type||this.flags["has-lightbox"])&&t.match(/tve-l-open|tve_lb_|tve_p_lb_/)}},{key:"customSelectorChecks",get:function(){var e=this;return[this.hasAnimationsAndActions,this.hasNumericPagination,this.hasGalleryLightbox,this.hasLeadGeneration,this.hasLightboxAction,this.hasNumberCounter,this.hasFloatingVideo,this.hasPostListCover,this.hasImageGallery,this.hasNotification,this.hasWooMiniCart,this.hasUserProfile,this.hasContactForm,this.hasImagePopup,this.isTCBLightbox,this.hasVideoPopup,this.hasFileUpload,this.hasTableSort,this.hasACFVideo,this.hasParallax,this.hasMegaMenu,this.hasToggles,this.hasTooltip,this.hasMenu,this.hasTOC].map(function(t){return t.bind(e)}).concat(window.lightspeed_extra_checks||[])}}],[{key:"getRealSelector",value:function(t){return t.replace(/::\S+/g,"").replace(new RegExp("(".concat([].concat([":hover",":active",":focus-within",":focus",":visited",":after",":before",":checked",":empty"],[".tve_anim_start",".thrv_data_element_start",".go-down",".next",".ct_finished",".expired",".tcb-disabled-pagination-button",".tve-state-expanded",".expand-children",".tve-m-expanded",".tve-state-active",".tcb_show_all_hidden"]).map(function(t){return t.replace(".","\\.")}).join("|"),")"),"g"),"")}},{key:"conditionText",value:function(t){var e=null;return t.conditionText&&(e=t.conditionText),t.cssText.match(/([^{]*){/m)&&(e=RegExp.$1.trim()),e}},{key:"excludedContainers",get:function(){return[".tve-image-resize",".fr-dropdown-menu"]}}]),h}()}}}}}}}})("workspace/editor/js/editor/src/lightspeed-optimize");